<div class="min-h-screen p-4 bg-white">
  <!-- Top Bar -->
  <div class="flex justify-between items-center mb-4 gap-4 flex-wrap">
    <!-- Filters Button -->
    <button
      pButton
      icon="pi pi-filter"
      label="Filters"
      (click)="toggleSidebar()"
      class="p-button-sm"
    ></button>
    <!-- Search Input -->
    <div class="w-full max-w-md flex gap-2">
      <input
        type="text"
        pInputText
        placeholder="Enter search term..."
        [(ngModel)]="query"
        class="flex-1"
      />

      <p-button
        type="button"
        label="Search"
        icon="pi pi-search"
        [disabled]="isSearching"
        (click)="onSearch()"
      />
    </div>
  </div>

  <div
    class="flex"
  >
    <!-- Sidebar wrapper -->
    <p-card *ngIf="!isCollapsed" class="mr-4">
      <app-filters (applyFilters)="onFiltersApplied($event)"
        [initialCategories]="filters?.categories ?? []"
        [initialArticleType]="filters?.articleType"></app-filters>
    </p-card>

    <!-- Main Content -->
    <div class="flex flex-col gap-4">
      @if (isSearching) {
        <p >Loading...</p>
      }
      @else {
        <ng-container *ngFor="let article of articles">
          <p-card class="mb-4">
            <a
              [href]="article.url"
              target="_blank"
              rel="noopener noreferrer"
              class="text-blue-600 text-xl font-semibold hover:underline"
            >
              {{ article.title }}
            </a>
            <p class="text-gray-700 mt-2">
              {{ article.text }}
            </p>
            <div class="text-sm text-gray-500 mt-3">Source: Wikipedia</div>
          </p-card>
        </ng-container>

        <!-- âœ… PrimeNG Paginator -->
        <p-paginator
          [rows]="pageSize"
          [first]="currentPage * pageSize"
          [totalRecords]="totalPages * pageSize"
          [rowsPerPageOptions]="[10, 20, 50]"
          (onPageChange)="onPageChange($event)"
          styleClass="mt-4"
        ></p-paginator>
        @if(articles.length <= 0) {
          <p >No articles found</p>
        }
      }
    </div>
  </div>
</div>
